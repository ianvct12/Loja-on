!function(s){var e={inputSel:"dgwt-wcas-options-toggle input[type=radio]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(e){var t=s('[name="'+e+'"]').closest("."+this.groupSel),a=s('[name="'+e+'"]:checked').val(),i="";this.hideAll(t),(a=a.replace("_","-")).length>0&&(i="wcas-opt-"+a),s("."+i).length>0&&s("."+i).fadeIn()},hideAll:function(s){s.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var e=this;s("."+e.inputSel).on("change",function(){e.reloadChoices(s(this).attr("name"))})},init:function(){var e=this,t=s("."+e.inputSel+":checked");t.length>0&&(e.registerListeners(),t.each(function(){e.reloadChoices(s(this).attr("name"))}))}},t={inputSel:"dgwt-wcas-options-cb-toggle input[type=checkbox]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(e){var t=e.is(":checked"),a=this.getGroupSelector(e);s("."+a+":not(.dgwt-wcas-options-cb-toggle)").hide(),t&&s("."+a).each(function(){s(this).hasClass("js-dgwt-wcas-adv-settings")&&s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--disabled")||s(this).fadeIn()})},getGroupSelector(e){var t=e.closest(".dgwt-wcas-options-cb-toggle"),a="",i=t.attr("class").split(/\s+/);return s.each(i,function(s,e){-1!==e.indexOf("js-dgwt-wcas-cbtgroup-")&&(a=e)}),a},registerListeners:function(){var e=this;s(document).on("change","."+e.inputSel,function(){e.reloadChoices(s(this))})},refresh:function(){var e=this,t=s("."+e.inputSel);t.length>0&&t.each(function(){var t=s(this).is(":checked"),a=e.getGroupSelector(s(this));t?s("."+a).fadeIn():s("."+a+":not(.dgwt-wcas-options-cb-toggle)").hide()})},init:function(){var e=this,t=s("."+e.inputSel);t.length>0&&(e.registerListeners(),t.each(function(){e.reloadChoices(s(this))}))}},a={inputSel:"js-dgwt-wcas-options-toggle-sibling input[type=checkbox]",toogleSibling:function(s){s.is(":checked")?s.closest("label").next().fadeIn():s.closest("label").next().hide()},registerListeners:function(){var e=this;s(document).on("change","."+e.inputSel,function(){e.toogleSibling(s(this))})},init:function(){var e=this,t=s("."+e.inputSel);t.length>0&&(e.registerListeners(),t.each(function(){e.toogleSibling(s(this))}))}},i={layoutSelect:"select[id*='search_layout']",overlayMobile:"input[id*='enable_mobile_overlay']",switchLayoutBreakpoint:"input[id*='mobile_breakpoint']",mobileOverlayBreakpoint:"input[id*='mobile_overlay_breakpoint']",searchIconColor:"input[id*='search_icon_color']",$layoutSelectEl:null,$overlayMobileEl:null,$switchLayoutBreakpointEl:null,$mobileOverlayBreakpointEl:null,$searchIconColorEl:null,setConditions:function(){var e=this.$layoutSelectEl.find("option:selected").val(),t=this.$overlayMobileEl.is(":checked"),a=s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--enabled");switch(this.hideOption(this.$switchLayoutBreakpointEl),this.hideOption(this.$mobileOverlayBreakpointEl),this.hideOption(this.$searchIconColorEl),s("input[id*='bg_search_icon_color']").closest("tr").show(),e){case"icon":a&&this.showOption(this.$searchIconColorEl);break;case"icon-flexible":case"icon-flexible-inv":a&&(this.showOption(this.$switchLayoutBreakpointEl),this.showOption(this.$searchIconColorEl));break;default:a&&s("input[id*='bg_search_icon_color']").closest("tr").hide()}t&&this.showOption(this.$mobileOverlayBreakpointEl)},hideOption:function(s){s.closest("tr").hide()},showOption:function(s){s.closest("tr").show()},registerListeners:function(){var s=this;s.$layoutSelectEl.on("change",function(){s.setConditions()}),s.$overlayMobileEl.on("change",function(){s.setConditions()})},init:function(){var e=this,t=s(e.layoutSelect);t.length>0&&(e.$layoutSelectEl=t,e.$overlayMobileEl=s(e.overlayMobile),e.$switchLayoutBreakpointEl=s(e.switchLayoutBreakpoint),e.$mobileOverlayBreakpointEl=s(e.mobileOverlayBreakpoint),e.$searchIconColorEl=s(e.searchIconColor),e.registerListeners(),setTimeout(function(){e.setConditions()},400))}},o={actionTriggerClass:"js-ajax-build-index",actionStopTriggerClass:"js-ajax-stop-build-index",indexingWrapperClass:"js-dgwt-wcas-indexing-wrapper",indexerTabProgressClass:"js-dgwt-wcas-indexer-tab-progress",indexerTabErrorClass:"js-dgwt-wcas-indexer-tab-error",indexerMenuErrorClass:"dgwt-wcas-menu-warning-icon",getWrapper:function(){return s("."+this.indexingWrapperClass).closest(".dgwt-wcas-settings-info")},registerListeners:function(){var e=this;s(document).on("click","."+e.actionTriggerClass,function(t){t.preventDefault();var a=s(this);a.attr("disabled","disabled"),s(".dgwt-wcas-settings-info").addClass("wcas-ajax-build-index-wait"),s("."+e.indexerTabErrorClass).removeClass("active"),s("."+e.indexerTabProgressClass).addClass("active");var i=!!a.hasClass("js-ajax-build-index-emergency");i&&(s(".dgwt-wcas-indexing-header__title").text("[Emergency mode] Wait... Indexing in progress"),s(".dgwt-wcas-indexing-header__troubleshooting, .dgwt-wcas-indexing-header__actions, .js-dgwt-wcas-indexer-details").hide()),s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index",emergency:i,_wpnonce:dgwt_wcas.nonces.build_index},success:function(s){void 0!==s&&s.success&&(e.getWrapper().html(s.data.html),e.heartbeat())},complete:function(){a.removeAttr("disabled"),s(".dgwt-wcas-settings-info").removeClass("wcas-ajax-build-index-wait"),i&&window.location.reload()}})}),s(document).on("click","."+e.actionStopTriggerClass,function(t){t.preventDefault(),s(this).attr("disabled","disabled"),e.getWrapper().attr("data-stopping","1"),s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_stop_build_index",_wpnonce:dgwt_wcas.nonces.stop_build_index},success:function(s){void 0!==s&&s.success&&(e.getWrapper().html(s.data.html),e.heartbeat())},complete:function(){e.getWrapper().attr("data-stopping","0")}})})},heartbeat:function(){var e=this;setTimeout(function(){s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index_heartbeat",_wpnonce:dgwt_wcas.nonces.build_index_heartbeat},success:function(t){void 0!==t&&t.success&&"1"!==e.getWrapper().attr("data-stopping")&&(e.getWrapper().html(t.data.html),t.data.loop?e.heartbeat():(s("."+e.indexerTabProgressClass).removeClass("active"),"error"===t.data.status?s("."+e.indexerTabErrorClass).addClass("active"):"completed"===t.data.status&&s("."+e.indexerMenuErrorClass).remove()),t.data.loop||!(t.data.refresh_once.length>0)||document.cookie.split(";").some(function(s){return 0===s.trim().indexOf("dgwt_wcas_refresh_once="+t.data.refresh_once)})||"none"!==s("#dgwt_wcas_troubleshooting-tab").css("display")||(document.cookie="dgwt_wcas_refresh_once="+t.data.refresh_once,location.reload()))}})},1e3)},detailsToggle:function(){var e;s(document).on("click",".js-dgwt-wcas-indexing-details-trigger",function(t){t.preventDefault();var a=s(".js-dgwt-wcas-indexer-details");a.hasClass("show")?(a.removeClass("show"),a.addClass("hide"),s(".js-dgwt-wcas-indexing__showd").addClass("show").removeClass("hide"),s(".js-dgwt-wcas-indexing__hided").addClass("hide").removeClass("show"),e=!1):(a.addClass("show"),a.removeClass("hide"),s(".js-dgwt-wcas-indexing__showd").addClass("hide").removeClass("show"),s(".js-dgwt-wcas-indexing__hided").addClass("show").removeClass("hide"),e=!0),s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_index_details_toggle",display:e}})})},init:function(){this.registerListeners(),s("."+this.indexingWrapperClass).length>0&&void 0!==dgwt_wcas.is_premium&&this.heartbeat(),this.detailsToggle()}},n={init:function(){var e=this;s(".dgwt-wcas-selectize").length>0&&s.ajax({url:ajaxurl,data:{action:"dgwt_wcas_settings_list_custom_fields",_wpnonce:s(".dgwt-wcas-selectize").data("security")},success:function(s){void 0!==s&&void 0!==s.data&&e.initSelectize(s.data)}})},initSelectize:function(e){var t=s(".dgwt-wcas-selectize");t.length>0&&t.each(function(){var t=s(this),a=t.data("options"),i=e;if(a.length>0){a=JSON.parse('["'+decodeURI(a.replace(/&/g,'","').replace(/=/g,'","'))+'"]');var o="";a.forEach(function(s,e){if((e+1)%2==0){var t={value:s,label:o};i.push(t),o=""}o=s})}s(this).selectize({persist:!1,maxItems:null,valueField:"key",labelField:"label",searchField:["value","label"],options:i,create:function(s){return{value:s.key,label:s.label}},load:function(e,a){if(!e.length)return a();s.ajax({url:ajaxurl,data:{action:"dgwt_wcas_settings_list_custom_fields",_wpnonce:t.data("security")},error:function(){a()},success:function(s){a(s.data)}})}})})}},c={init:function(){var e=s(".js-dgwt-wcas-tooltip");e.length>0&&e.each(function(){var e=s(this)[0],t=s(this).data("tooltip-html-el"),a=s(this).data("tooltip-placement");t&&new DgwtWcasTooltip(e,{title:s("."+t+" > .dgwt-wcas-tooltip-wrapper")[0],placement:a,trigger:"hover",html:!0})})}},r={advClass:"js-dgwt-wcas-adv-settings",highlightClass:"dgwt-wcas-opt-highlight",transClass:"dgwt-wcas-opt-transition",init:function(){this.clickListener(),this.setStartingState()},clickListener:function(){var e=this;s(document).on("click",".js-dgwt-wcas-settings__advanced",function(){var t;t=s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--disabled")?"show":"hide",e.saveChoice(t)})},setStartingState:function(){var e=s("."+this.advClass);e.length>0&&(s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--enabled")?(e.show(),t.refresh()):e.hide())},saveChoice:function(e){s(".js-dgwt-wcas-settings__advanced").append('<span class="dgwt-wcas-adv-settings-saving">saving...</span>'),s.ajax({url:ajaxurl,data:{_wpnonce:dgwt_wcas.nonces.advanced_options_switch,action:"dgwt_wcas_adv_settings",adv_settings_value:e}}).done(function(e){s(".dgwt-wcas-adv-settings-saving").remove()});var t=s(".js-dgwt-wcas-adv-settings-toggle");"show"===e&&(t.removeClass("woocommerce-input-toggle--disabled"),t.addClass("woocommerce-input-toggle--enabled")),"hide"===e&&(t.removeClass("woocommerce-input-toggle--enabled"),t.addClass("woocommerce-input-toggle--disabled")),this.toggleAdvancedOpt(e)},toggleAdvancedOpt:function(e){var a=this,o=s("."+a.advClass);o.length>0&&(o.addClass(a.highlightClass),o.addClass(a.transClass),"show"===e&&o.fadeIn(500,function(){setTimeout(function(){o.removeClass(a.highlightClass),setTimeout(function(){o.removeClass(a.transClass),t.refresh(),i.setConditions()},500)},500)}),"hide"===e&&setTimeout(function(){o.removeClass(a.transClass),o.fadeOut(500,function(){o.removeClass(a.highlightClass)})},500))}},d={placeholderClass:"js-dgwt-wcas-stats-placeholder",placeholderClassLoaded:"js-dgwt-wcas-stats-placeholder-loaded",preloaderClass:"dgwt-wcas-stats-preloader",settingsGroupSel:"#dgwt_wcas_analytics",criticalSearchesLoadMoreClass:"js-dgwt-wcas-critical-searches-load-more",autocompleteWithResultsLoadMoreClass:"js-dgwt-wcas-autocomplete-with-results-load-more",searchPageWithResultsLoadMoreClass:"js-dgwt-wcas-search-page-with-results-load-more",checkPhraseStatusClass:"js-dgwt-wcas-stats-critical-check",checkPhraseStatusInitClass:"js-dgwt-wcas-stats-critical-check-init",rowLoadingClass:"dgwt-wcas-analytics-row-loading",languageSwitcherClass:"js-dgwt-wcas-analytics-lang",excludePhraseClass:"js-dgwt-wcas-analytics-exclude-phrase",checkIndexerAction:"js-dgwt-wcas-analytics-check-indexer",resetAnalyticsAction:"js-dgwt-wcas-analytics-reset",analyticsExportCSVAction:"js-dgwt-wcas-analytics-export-csv",init:function(){void 0!==dgwt_wcas.analytics&&dgwt_wcas.analytics.enabled&&this.interfaceLoaderListener()},interfaceLoaderListener:function(){var e=this,t=s("."+e.languageSwitcherClass);s(document).on("dgwt_wcas_settings_group_active",function(t,a){s(a).length>0&&"dgwt_wcas_analytics"===a.id&&!e.isLoaded()&&e.loadInterface()}),t.length>0&&t.on("change",function(){var t=s("."+e.placeholderClass);t.length>0&&(t.html(""),e.loadInterface())})},isLoaded:function(){return s("."+this.placeholderClassLoaded).length>0},showPreloader:function(){var e=s("."+this.placeholderClass),t='<img class="'+this.preloaderClass+'" src="'+dgwt_wcas.analytics.images.placeholder+'" />';e.length&&e.append(t)},loadInterface:function(){var e=this,t=s("."+e.languageSwitcherClass+" option:selected");e.showPreloader();var a={action:"dgwt_wcas_load_stats_interface",_wpnonce:dgwt_wcas.analytics.nonce.analytics_load_interface};t.length>0&&(a.lang=t.val()),s.post(ajaxurl,a,function(t){var a=s("."+e.placeholderClass);"object"==typeof t&&t.success&&a.length>0&&(a.addClass(e.placeholderClassLoaded),a.html(t.data.html),e.loadCheckCriticalSearchesListeners(),e.loadMoreListeners(),e.resetStatsListener(),e.exportStatsListener())})},loadCheckCriticalSearchesListeners:function(){var e=this,t=s("."+e.checkPhraseStatusClass+":not(."+e.checkPhraseStatusInitClass+")");t.on("click",function(t){t.preventDefault(),s(t.target).after('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),e.checkPhraseStatus(s(t.target))}),t.each(function(){s(this).addClass(e.checkPhraseStatusInitClass)})},loadMoreListeners:function(){var e=this;s("."+e.criticalSearchesLoadMoreClass).on("click",function(t){t.preventDefault(),s(this).before('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),s(this).closest("tr").addClass(e.rowLoadingClass),e.loadMoreCriticalSearches()}),s("."+e.autocompleteWithResultsLoadMoreClass).on("click",function(t){t.preventDefault(),e.loadMorePhrases("autocomplete",s(t.target))}),s("."+e.searchPageWithResultsLoadMoreClass).on("click",function(t){t.preventDefault(),e.loadMorePhrases("search-page",s(t.target))})},resetStatsListener:function(){s("."+this.resetAnalyticsAction).on("click",function(e){var t=s(this);if(e.preventDefault(),confirm(dgwt_wcas.analytics.labels.reset_stats_confirm)){var a={action:"dgwt_wcas_reset_stats",_wpnonce:dgwt_wcas.analytics.nonce.reset_stats};t.next().addClass("loading"),s.post(ajaxurl,a,function(s){location.reload()})}})},exportStatsListener:function(){var e=s("."+this.languageSwitcherClass+" option:selected");s("."+this.analyticsExportCSVAction).on("click",function(t){s(this),t.preventDefault();var a=new URL(dgwt_wcas.adminurl);a.searchParams.append("action","dgwt_wcas_export_stats_csv"),a.searchParams.append("context",s(this).data("context")),a.searchParams.append("_wpnonce",dgwt_wcas.analytics.nonce.export_stats_csv),e.length>0&&a.searchParams.append("lang",e.val()),window.location=a})},checkPhraseStatus:function(e){var t=this,a=s("."+t.languageSwitcherClass+" option:selected"),i={action:"dgwt_wcas_check_critical_phrase",phrase:e.closest("tr").find("td:nth-child(2)").text(),_wpnonce:dgwt_wcas.analytics.nonce.check_critical_phrase};a.length>0&&(i.lang=a.val()),s.post(ajaxurl,i,function(a){if("object"==typeof a&&a.success){var i=e.closest("tr");e.closest("td").html(a.data.html);var o=i.find("."+t.excludePhraseClass),n=i.find("."+t.checkIndexerAction);o.length>0&&o.on("click",function(e){e.preventDefault(),s(e.target).closest("td").html("<p>Processing...</p>"),t.excludePhrase(i)}),n.length>0&&s("."+t.checkIndexerAction).on("click",function(e){e.preventDefault();var t=s("#dgwt_wcas_performance-tab");t.length>0&&(t[0].click(),s([document.documentElement,document.body]).animate({scrollTop:0},1e3))})}})},excludePhrase:function(e){var t=s("."+this.languageSwitcherClass+" option:selected"),a={action:"dgwt_wcas_exclude_critical_phrase",phrase:e.find("td:nth-child(2)").text(),_wpnonce:dgwt_wcas.analytics.nonce.exclude_critical_phrase};t.length>0&&(a.lang=t.val()),s.post(ajaxurl,a,function(s){"object"==typeof s&&s.success&&(e.addClass("dgwt-wcas-analytics-disable-row"),e.find("td:last-child").html(s.data))})},loadMoreCriticalSearches:function(){var e=this,t=s("."+e.languageSwitcherClass+" option:selected"),a={action:"dgwt_wcas_laod_more_critical_searches",loaded:s(".js-dgwt-wcas-critical-searches-row").length,_wpnonce:dgwt_wcas.analytics.nonce.load_more_critical_searches};t.length>0&&(a.lang=t.val()),s.post(ajaxurl,a,function(t){if("object"==typeof t&&t.success){var a=s("."+e.criticalSearchesLoadMoreClass).closest("tr");t.data.html.length>0&&a.before(t.data.html),t.data.more>0?(a.removeClass(e.rowLoadingClass),a.find("img").remove(),s("."+e.criticalSearchesLoadMoreClass+" span:first-child").text(t.data.more_label)):a.remove(),e.loadCheckCriticalSearchesListeners()}})},loadMorePhrases:function(e,t){var a=s("."+this.languageSwitcherClass+" option:selected");if(t.before('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),t.closest("tr").addClass(this.rowLoadingClass),"autocomplete"===e)var i={action:"dgwt_wcas_laod_more_autocomplete",loaded:s(".js-dgwt-wcas-autocomplete-row").length,_wpnonce:dgwt_wcas.analytics.nonce.load_more_autocomplete};else var i={action:"dgwt_wcas_laod_more_search_page",loaded:s(".js-dgwt-wcas-search-page-row").length,_wpnonce:dgwt_wcas.analytics.nonce.load_more_search_page};a.length>0&&(i.lang=a.val()),s.post(ajaxurl,i,function(s){"object"==typeof s&&s.success&&t.closest("tbody").html(s.data.html)})}};window.DGWT_WCAS_SEARCH_PREVIEW={previewWrapper:{},searchWrapp:{},suggestionWrapp:{},searchInput:{},animateTypingInterval:null,init:function(){var e=this;e.previewWrapper=s(".js-dgwt-wcas-preview"),e.searchWrapp=s(".js-dgwt-wcas-search-wrapp"),e.suggestionWrapp=s(".js-dgwt-wcas-suggestions-wrapp"),e.detailsWrapp=s(".js-dgwt-wcas-details-wrapp"),e.searchInput=s(".js-dgwt-wcas-search-input"),e.onChangeHandler(),e.onColorHandler(),e.onTypeHandler(),e.disableSubmit(),e.noResultsHandler(),e.fixSizesInit(),e.keepPreviewVisible(),e.animationController()},isChecked:function(s){return!!(s.length>0&&s.is(":checked"))},isColor:function(s){return"string"==typeof s&&7===s.length&&"#"===s.charAt(0)},camelCase:function(s){for(var e=s.split("_"),t="",a=0;a<e.length;a++)t+=e[a].charAt(0).toUpperCase()+e[a].slice(1);return t},disableSubmit:function(){var e,t;s(".js-dgwt-wcas-preview-source").on("click",function(a){a.preventDefault();var i=a.pageX-100,o=a.pageY+10,n='<div class="dgwt-wcas-click-alert">'+window.dgwt_wcas.adminLabels.preview+"</div>";void 0!==e&&(clearTimeout(e),t&&t.remove()),s("body").append(n),(t=s(".dgwt-wcas-click-alert")).css({left:i,top:o}),s(".dgwt-wcas-preview-source").addClass("dgwt-wcas-preview-source-no-click"),e=setTimeout(function(){t.fadeOut(500,function(){s(this).remove(),s(".dgwt-wcas-preview-source").removeClass("dgwt-wcas-preview-source-no-click")})},2e3)})},noResultsHandler:function(){var e=this,t=".js-dgwt-wcas-preview .dgwt-wcas-suggestion:not(.js-dgwt-wcas-suggestion-nores)",a=".js-dgwt-wcas-suggestion-nores",i="textarea[id*='search_no_results_text']";s(document).on("focus",i,function(){s(t).addClass("dgwt-wcas-hide"),s(a).removeClass("dgwt-wcas-hide"),e.detailsWrapp.addClass("dgwt-wcas-hide"),e.suggestionWrapp.addClass("dgwt-wcas-preview-nores")}),s(document).on("blur",i,function(){s(t).removeClass("dgwt-wcas-hide"),s(a).addClass("dgwt-wcas-hide"),e.detailsWrapp.removeClass("dgwt-wcas-hide"),e.suggestionWrapp.removeClass("dgwt-wcas-preview-nores")})},onChangeHandler:function(){for(var e=this,t=["show_submit_button","max_form_width","search_style","search_layout","show_product_image","show_product_sku","show_product_desc","show_product_price","show_matching_categories","show_categories_images","show_matching_tags","show_matching_brands","show_brands_images","show_matching_posts","show_matching_pages","show_grouped_results","suggestions_limit","show_details_box"],a=0;a<t.length;a++){var i=["search_style","search_layout"].includes(t[a])?"select":"input",o=i+"[id='dgwt_wcas_settings\\["+t[a]+"\\]']",n=i+"[id^='dgwt_wcas_settings'][data-option-trigger='"+t[a]+"']",c=s(o),r=s(n),d="onChange"+e.camelCase(t[a]);"function"==typeof e[d]&&c.length>0?(e[d](c,c.val()),s(document).on("change",o,function(){d=s(this).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),"function"==typeof e[d="onChange"+e.camelCase(d)]&&e[d](s(this),this.value)})):"function"==typeof e[d]&&r.length>0?(e[d](r,r.val()),s(document).on("change",n,function(){d=s(this).data("option-trigger"),"function"==typeof e[d="onChange"+e.camelCase(d)]&&e[d](s(this),this.value)})):e[d]("","")}},onColorHandler:function(){for(var e=this,t=["search_icon_color","bg_input_underlay_color","bg_input_color","text_input_color","border_input_color","bg_submit_color","text_submit_color","sug_bg_color","sug_hover_color","sug_text_color","sug_highlight_color","sug_border_color"],a=0;a<t.length;a++){var i="input[id*='"+t[a]+"']",o=s(i),n="onColor"+e.camelCase(t[a]);e[n](o,o.val()),s(document).on("change",i,function(){n=s(this).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),e[n="onColor"+e.camelCase(n)](s(this),this.value)})}},onColorChangeHandler:function(s,e){var t=s.attr("id").replace("]","").replace("dgwt_wcas_settings[","");this[t="onColor"+this.camelCase(t)](s,e)},onTypeHandler:function(){for(var e=this,t=["search_submit_text","search_placeholder","search_no_results_text","search_see_all_results_text"],a=0;a<t.length;a++){var i=("search_no_results_text"===t[a]?"textarea":"input")+"[id*='"+t[a]+"']",o=s(i),n="onType"+e.camelCase(t[a]);e[n](o,o.val()),s(document).on("input",i,function(t){n=s(t.target).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),e[n="onType"+e.camelCase(n)](s(t.target),this.value)})}},onChangeMaxFormWidth:function(e,t){t.length>0&&"0"!=t?(this.searchWrapp.css("max-width",t+"px"),this.suggestionWrapp.css("max-width",t+"px")):(this.searchWrapp.css("max-width","100%"),this.suggestionWrapp.css("max-width","100%")),this.onChangeShowDetailsBox(s("input[id*='show_details_box']"))},onChangeShowSubmitButton:function(e,t){var a=this,i=s(".js-dgwt-wcas-search-submit");if(a.isChecked(e)){a.searchWrapp.addClass("dgwt-wcas-has-submit"),a.searchWrapp.removeClass("dgwt-wcas-no-submit"),i.show(),s(".dgwt-wcas-sf-wrapp > .dgwt-wcas-ico-magnifier").hide();var o=s("input[id*='bg_submit_color']"),n=s("input[id*='text_submit_color']");a.onColorBgSubmitColor(o,o.val()),a.onColorTextSubmitColor(n,n.val()),setTimeout(function(){a.positionPreloader()},10)}else a.searchWrapp.addClass("dgwt-wcas-no-submit"),a.searchWrapp.removeClass("dgwt-wcas-has-submit"),i.hide(),s(".dgwt-wcas-sf-wrapp > .dgwt-wcas-ico-magnifier").show(),a.positionPreloader()},onChangeShowProductImage:function(e,t){var a=s(".js-dgwt-wcas-si"),i=s(".js-dgwt-wcas-content-wrapp");this.isChecked(e)?(this.suggestionWrapp.addClass("dgwt-wcas-has-img"),s(".dgwt-wcas-suggestion-product > .dgwt-wcas-st").remove(),s(".dgwt-wcas-suggestion-product > .dgwt-wcas-sp").remove(),i.show(),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-img"),i.each(function(){s(this).closest(".dgwt-wcas-suggestion-product").append(s(this).html())}),i.hide(),a.hide())},onChangeShowProductSku:function(e,t){var a=s(".js-dgwt-wcas-sku");this.isChecked(e)?(this.suggestionWrapp.addClass("dgwt-wcas-has-sku"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-sku"),a.hide())},onChangeShowProductDesc:function(e,t){var a=s(".js-dgwt-wcas-sd");this.isChecked(e)?(this.suggestionWrapp.addClass("dgwt-wcas-has-desc"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-desc"),a.hide())},onChangeShowProductPrice:function(e,t){var a=s(".js-dgwt-wcas-sp");this.isChecked(e)?(this.suggestionWrapp.addClass("dgwt-wcas-has-price"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-price"),a.hide())},onChangeShowMatchingCategories:function(e,t){var a=s(".dgwt-wcas-suggestion-headline-cat"),i=s(".dgwt-wcas-suggestion-cat");this.isChecked(e)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowCategoriesImages:function(e,t){var a=s(".js-dgwt-wcas-suggestion-cat");this.isChecked(e)?a.addClass("dgwt-wcas-has-img"):a.removeClass("dgwt-wcas-has-img")},onChangeShowMatchingTags:function(e,t){var a=s(".dgwt-wcas-suggestion-headline-tag"),i=s(".dgwt-wcas-suggestion-tag");this.isChecked(e)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowMatchingBrands:function(e,t){var a=s(".dgwt-wcas-suggestion-headline-brand"),i=s(".dgwt-wcas-suggestion-brand");this.isChecked(e)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowBrandsImages:function(e,t){var a=s(".js-dgwt-wcas-suggestion-brand");this.isChecked(e)?a.addClass("dgwt-wcas-has-img"):a.removeClass("dgwt-wcas-has-img")},onChangeShowMatchingPosts:function(e,t){var a=s(".dgwt-wcas-suggestion-headline-post"),i=s(".dgwt-wcas-suggestion-post");this.isChecked(e)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowMatchingPages:function(e,t){var a=s(".dgwt-wcas-suggestion-headline-page"),i=s(".dgwt-wcas-suggestion-page");this.isChecked(e)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowGroupedResults:function(e,t){var a=s(".dgwt-wcas-st--direct-headline"),i=s(".dgwt-wcas-suggestion-headline");this.isChecked(e)?(a.addClass("dgwt-wcas-hidden"),this.suggestionWrapp.addClass("dgwt-wcas-has-headings"),s(".dgwt-wcas-suggestion-headline").show(),this.isChecked(s("input[data-option-trigger='show_matching_categories']"))||s(".dgwt-wcas-suggestion-headline-cat").hide(),this.isChecked(s("input[data-option-trigger='show_matching_tags']"))||s(".dgwt-wcas-suggestion-headline-tag").hide(),this.isChecked(s("input[data-option-trigger='show_matching_brands']"))||s(".dgwt-wcas-suggestion-headline-brand").hide(),this.isChecked(s("input[id*='show_matching_posts']"))||s(".dgwt-wcas-suggestion-headline-post").hide(),this.isChecked(s("input[id*='show_matching_pages']"))||s(".dgwt-wcas-suggestion-headline-page").hide()):(a.removeClass("dgwt-wcas-hidden"),i.hide(),this.suggestionWrapp.removeClass("dgwt-wcas-has-headings"))},onChangeSuggestionsLimit:function(e,t){setTimeout(function(){var a=0,i=7,o=s(".dgwt-wcas-suggestion-duplicated"),n=["brand","cat","tag","post","page","product"];t.length>0&&"0"!=t&&(i=Math.abs(t)),o.length>0&&o.remove();var c=[];for(a=0;a<n.length;a++){var r=s(".dgwt-wcas-suggestion-"+n[a]+":not(.js-dgwt-wcas-suggestion-hidden)");r.length>0&&c.push(r)}var d=c.length;if(c.length>0)for(var l=i-c.length,g=c.length-1;l>0;){var h=c[g].clone();h.addClass("dgwt-wcas-suggestion-duplicated"),h.removeClass("dgwt-wcas-suggestion-selected"),c[g].after(h),d++,--g<0&&(g=c.length-1),l--}d>i&&e.val(d)},10)},onChangeShowDetailsBox:function(e,t){var a=this;a.isChecked(e)?(a.detailsWrapp.show(),a.searchWrapp.addClass("dgwt-wcas-is-detail-box"),a.previewWrapper.addClass("dgwt-wcas-is-details"),a.previewWrapper.addClass("dgwt-wcas-details-right"),setTimeout(function(){s(".dgwt-wcas-suggestion-product:not(.dgwt-wcas-suggestion-duplicated)").addClass("dgwt-wcas-suggestion-selected");var e=s(".js-dgwt-wcas-preview-bar-example");if(e.width()>=550){a.previewWrapper.addClass("dgwt-wcas-full-width");var t=getComputedStyle(e[0]).width;(t=Math.round(parseFloat(t.replace("px",""))))%2==0?(a.suggestionWrapp.css("width",Math.round(t/2)),a.detailsWrapp.css("width",Math.round(t/2))):(a.suggestionWrapp.css("width",Math.floor(t/2)),a.detailsWrapp.css("width",Math.ceil(t/2)))}else a.suggestionWrapp.width(a.searchWrapp.width())},10)):(a.detailsWrapp.hide(),a.searchWrapp.removeClass("dgwt-wcas-is-detail-box"),a.previewWrapper.removeClass("dgwt-wcas-is-details"),a.previewWrapper.removeClass("dgwt-wcas-details-right"),a.previewWrapper.removeClass("dgwt-wcas-full-width"),s(".dgwt-wcas-suggestion-product").removeClass("dgwt-wcas-suggestion-selected"),a.suggestionWrapp.css("width",""),a.detailsWrapp.css("width",""))},onChangeSearchStyle:function(e,t){var a,i=this,o=["solaris","pirx"],n=s('input[id*="show_submit_button"]'),c=s('label[for*="bg_submit_color"]');for(s(".dgwt-wcas-ico-magnifier").addClass("dgwt-wcas-hidden"),a=0;a<o.length;a++)s(".js-dgwt-wcas-preview").removeClass("dgwt-wcas-open-"+o[a]),s(".js-dgwt-wcas-search-wrapp").removeClass("dgwt-wcas-style-"+o[a]);if(s(".js-dgwt-wcas-ico-magnifier-"+t).removeClass("dgwt-wcas-hidden"),s(".js-dgwt-wcas-preview").addClass("dgwt-wcas-open-"+t),s(".js-dgwt-wcas-search-wrapp").addClass("dgwt-wcas-style-"+t),s('label[for*="bg_input_underlay_color"]').closest("tr").removeClass("dgwt-wcas-hidden"),"solaris"===t){s('label[for*="bg_input_underlay_color"]').closest("tr").addClass("dgwt-wcas-hidden"),s('label[for*="show_submit_button"] .js-dgwt-wcas-tooltip').addClass("dgwt-wcas-hidden"),s('label[for*="search_submit_text"]').closest("tr").removeClass("dgwt-wcas-hidden"),s('input[id*="search_submit_text"]').prop("disabled",!1),c.closest("tr").removeClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(1)').removeClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(2)').addClass("dgwt-wcas-hidden"),n.prop("disabled",!1),s(".js-dgwt-wcas-submit-button-pirx-tooltip").removeClass("dgwt-wcas-hidden"),s(".dgwt-wcas-sf-wrapp").css("background-color","");var r=s('input[id*="bg_input_underlay_color"]').closest("tr").find(".wp-picker-clear");r.length>0&&r[0].click(),setTimeout(function(){i.positionPreloader()},300)}if("pirx"===t){s('label[for*="show_submit_button"] .js-dgwt-wcas-tooltip').removeClass("dgwt-wcas-hidden"),s('label[for*="search_submit_text"]').closest("tr").addClass("dgwt-wcas-hidden"),s('input[id*="search_submit_text"]').prop("disabled",!0),s('label[for*="bg_submit_color"]').closest("tr").addClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(2)').removeClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(1)').addClass("dgwt-wcas-hidden"),s('input[id*="search_submit_text"]').val("");var d=c.closest("tr").find(".wp-picker-clear");d.length>0&&d[0].click(),i.onColorBgSubmitColor(),n.is(":checked")||n[0].click(),n.prop("disabled",!0),i.onTypeSearchSubmitText(s('input[id*="search_submit_text"]'),""),setTimeout(function(){i.positionPreloader()},10)}},onChangeSearchLayout:function(e,t){var a=s(".js-dgwt-wcas-preview-device-info"),i=s(".js-dgwt-wcas-preview-bar-example"),o=s(".js-dgwt-wcas-preview-icon-example");switch(s(".js-dgwt-wcas-preview-device-info > span").addClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-preview-icon-only"),t){case"classic":a.addClass("dgwt-wcas-hidden"),i.removeClass("dgwt-wcas-hidden"),o.addClass("dgwt-wcas-hidden");break;case"icon":a.addClass("dgwt-wcas-hidden"),i.addClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-hidden"),s(".dgwt-wcas-search-form").removeClass("dgwt-wcas-hidden"),s(".dgwt-wcas-search-icon-arrow").removeClass("dgwt-wcas-hidden"),o.addClass("dgwt-wcas-preview-icon-only");break;case"icon-flexible":a.removeClass("dgwt-wcas-hidden"),i.removeClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-form").addClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-icon-arrow").addClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="desktop"] span:nth-child(2)').removeClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="mobile"] span:nth-child(1)').removeClass("dgwt-wcas-hidden");break;case"icon-flexible-inv":a.removeClass("dgwt-wcas-hidden"),i.removeClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-form").addClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-icon-arrow").addClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="desktop"] span:nth-child(1)').removeClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="mobile"] span:nth-child(2)').removeClass("dgwt-wcas-hidden")}},onColorSearchIconColor:function(s,e){this.isColor(e)?this.searchWrapp.find(".dgwt-wcas-ico-magnifier-handler path").css("fill",e):this.searchWrapp.find(".dgwt-wcas-ico-magnifier-handler path").css("fill","")},onColorBgInputColor:function(s,e){this.isColor(e)?this.searchInput.css("background-color",e):this.searchInput.css("background-color","")},onColorBgInputUnderlayColor:function(e,t){var a=s(".dgwt-wcas-style-pirx .dgwt-wcas-sf-wrapp");this.isColor(t)?a.css("background-color",t):a.css("background-color","")},onColorTextInputColor:function(e,t){var a="dgwt-wcas-preview-placeholder-style";if(this.isColor(t)){var i='<style class="'+a+'">';i+=".dgwt-wcas-search-input {color:"+t+"!important;}",i+=".dgwt-wcas-ico-magnifier path {fill:"+t+"}",i+="</style>",s("head").append(i),this.searchInput.css("color",t)}else{this.searchInput.css("color","");var o=s("."+a);o.length>0&&o.remove()}},onColorBorderInputColor:function(s,e){this.isColor(e)?this.searchInput.css("border-color",e):this.searchInput.css("border-color","")},onColorBgSubmitColor:function(e,t){var a="dgwt-wcas-preview-submit-style";if(this.isChecked(s("input[id*='show_submit_button']"))&&this.isColor(t)){var i='<style class="'+a+'">';i+=".dgwt-wcas-search-submit::before{border-color: transparent "+t+"!important;}",i+=".dgwt-wcas-search-submit:hover::before{border-right-color: "+t+"!important;}",i+=".dgwt-wcas-search-submit:focus::before{border-right-color: "+t+"!important;}",i+=".dgwt-wcas-search-submit{background-color: "+t+"!important;}",i+=".dgwt-wcas-om-bar .dgwt-wcas-om-return{background-color: "+t+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorTextSubmitColor:function(e,t){this.isChecked(s("input[id*='show_submit_button']"))&&this.isColor(t)?(s(".js-dgwt-wcas-search-submit").css("color",t),s(".dgwt-wcas-search-submit .dgwt-wcas-ico-magnifier path").css("fill",t)):(this.searchInput.css("background-color",""),s(".js-dgwt-wcas-search-submit").css("color",""),s(".dgwt-wcas-search-submit .dgwt-wcas-ico-magnifier path").css("fill",""))},onColorSugBgColor:function(e,t){var a="dgwt-wcas-preview-sugbgcol-style";if(this.isColor(t)){var i='<style class="'+a+'">';i+=".dgwt-wcas-suggestions-wrapp,",i+=".dgwt-wcas-details-wrapp",i+="{background-color: "+t+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorSugHoverColor:function(e,t){this.isColor(t)?setTimeout(function(){s(".dgwt-wcas-suggestion-selected").css("background-color",t)},50):s(".dgwt-wcas-suggestion-selected").css("background-color","")},onColorSugTextColor:function(e,t){var a="dgwt-wcas-preview-sugtextcol-style";if(this.isColor(t)){var i='<style class="'+a+'">';i+=".dgwt-wcas-suggestions-wrapp *,",i+=".dgwt-wcas-details-wrapp *,",i+=".dgwt-wcas-sd,",i+=".dgwt-wcas-suggestion *",i+="{color: "+t+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorSugHighlightColor:function(e,t){var a="dgwt-wcas-preview-sughighlight-style";if(this.isColor(t)){var i='<style class="'+a+'">';i+=".dgwt-wcas-st strong,",i+=".dgwt-wcas-sd strong",i+="{color: "+t+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorSugBorderColor:function(e,t){var a="dgwt-wcas-preview-sugborder-style";if(this.isColor(t)){var i='<style class="'+a+'">';i+=".dgwt-wcas-suggestions-wrapp,",i+=".dgwt-wcas-details-wrapp,",i+=".dgwt-wcas-suggestion,",i+=".dgwt-wcas-datails-title,",i+=".dgwt-wcas-details-more-products",i+="{border-color: "+t+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onTypeSearchSubmitText:function(e,t){var a=s(".js-dgwt-wcas-search-submit-l"),i=s(".js-dgwt-wcas-search-submit-m");t.length>0?(a.text(t),a.show(),i.hide()):(a.text(""),a.hide(),i.show()),this.positionPreloader()},onTypeSearchPlaceholder:function(s,e){0==e.length&&(e=dgwt_wcas.labels.search_placeholder),this.searchInput.attr("placeholder",e)},onTypeSearchNoResultsText:function(e,t){var a=t;if(0==t.length)try{a=JSON.parse(dgwt_wcas.labels.no_results);var i=document.createElement("div");i.innerHTML=a,a=i.innerHTML}catch(o){}this.isHTMLPossiblyDangerous(a)&&(a="You used invalid HTML tags or attributes!"),s(".js-dgwt-wcas-suggestion-nores").html(a)},onTypeSearchSeeAllResultsText:function(e,t){0==t.length&&(t=dgwt_wcas.labels.show_more),s(".js-dgwt-wcas-st-more-label").text(t)},positionPreloader:function(){var e=s(".js-dgwt-wcas-search-wrapp:not(.dgwt-wcas-hidden) .js-dgwt-wcas-search-submit"),t=e.is(":visible"),a=s("select[id*='search_style'] option:selected").val(),i=e.width()+35;"pirx"==a&&(i=38),t||"solaris"!=a||(i=7),s(".dgwt-wcas-preloader").css("right",i+"px")},fixSizesInit:function(){var e=this;s(document).on("click","#dgwt_wcas_autocomplete-tab",function(){e.onChangeShowDetailsBox(s("input[id*='show_details_box']"))})},keepPreviewVisible:function(){var e=s(".js-dgwt-wcas-preview-inner"),t=s(".js-dgwt-wcas-preview"),a=s(".js-dgwt-wcas-preview-source"),i=s(".dgwt-eq-settings-form");s(window).on("scroll.autocomplete",function(){var o,n=s(document).scrollTop(),c=t[0].getBoundingClientRect().top-40;if(c<0){if(a.offset().top+a.outerHeight(!1)<=Math.floor(i.offset().top+i.outerHeight(!1))-90)e.css("top",(-1*c<1?0:-1*c)+"px");else if(n+40<e.offset().top){var r=e.css("top").replace(/px/i,"")-10;e.css("top",r+"px")}}else e.css("top",0)})},animationController:function(){var e=this;s(window).on("load",function(){var t=s("#dgwt_wcas_form_body-tab");t.length&&t.hasClass("nav-tab-active")&&e.startAnimateTyping()}),s(".dgwt_wcas_settings-nav-tab-wrapper > a").on("click",function(){"dgwt_wcas_form_body-tab"===s(this).attr("id")?(e.stopAnimateTyping(),e.startAnimateTyping()):e.stopAnimateTyping()}),s(".dgwt_wcas_settings-nav-tab-wrapper > a").on("click",function(){"dgwt_wcas_form_body-tab"===s(this).attr("id")?(e.stopAnimateTyping(),e.startAnimateTyping()):e.stopAnimateTyping()}),s('input[id*="search_placeholder"]').on("focus",function(){e.stopAnimateTyping(),_this.searchInput.val("")}),s('input[id*="search_placeholder"]').on("blur",function(){e.startAnimateTyping()})},getSearchLayout:function(){return s("select[id*='search_layout'] option:selected").val()},startAnimateTyping:function(){var e=this,t=0,a=s(".js-dgwt-wcas-search-wrapp"),i=s(".js-dgwt-wcas-search-input"),o=s(".js-dgwt-wcas-preview-icon-example .dgwt-wcas-search-form"),n=s(".js-dgwt-wcas-preview-icon-example .dgwt-wcas-search-icon-arrow"),c=s(".js-dgwt-wcas-preview-icon-example .dgwt-wcas-search-icon"),r=s(".dgwt-wcas-preloader"),d=s(".js-dgwt-wcas-preview-elements-close").html();e.animateTypingInterval=setInterval(function(){t++,"icon"===e.getSearchLayout()&&(1===t&&(o.addClass("dgwt-wcas-hidden"),n.addClass("dgwt-wcas-hidden")),6===t&&c.addClass("dgwt-wcas-search-icon-handler-click"),7===t&&(c.removeClass("dgwt-wcas-search-icon-handler-click"),o.removeClass("dgwt-wcas-hidden"),n.removeClass("dgwt-wcas-hidden"))),10===t&&(i.val("f"),a.addClass("dgwt-wcas-search-filled"),a.addClass("dgwt-wcas-search-focused"),r.addClass("dgwt-wcas-close")),11===t&&i.val("fi"),12===t&&(i.val("fib"),r.append(d),e.positionPreloader()),13===t&&i.val("fibo"),14===t&&i.val("fibo "),15===t&&i.val("fibo s"),16===t&&i.val("fibo se"),17===t&&i.val("fibo sea"),18===t&&i.val("fibo sear"),19===t&&i.val("fibo searc"),20===t&&i.val("fibo search"),30===t&&i.val("fibo searc"),31===t&&i.val("fibo sear"),32===t&&i.val("fibo sea"),33===t&&i.val("fibo se"),34===t&&i.val("fibo s"),35===t&&i.val("fibo "),36===t&&i.val("fibo"),37===t&&i.val("fib"),38===t&&(i.val("fi"),r.removeClass("dgwt-wcas-close")),39===t&&i.val("f"),40===t&&(i.val(""),r.html(""),a.removeClass("dgwt-wcas-search-filled")),45===t&&(t=0)},200)},stopAnimateTyping:function(){var e=s(".js-dgwt-wcas-search-wrapp"),t=s(".js-dgwt-wcas-search-input"),a=s(".dgwt-wcas-preloader");a.removeClass("dgwt-wcas-close"),t.val(""),a.html(""),e.removeClass("dgwt-wcas-search-filled"),clearInterval(this.animateTypingInterval)},isHTMLPossiblyDangerous:function(s){var e,t=!1;for(e=0,suspiciousStrings=["data:text/html","javascript:","xlink:href","function(","<script","<embed","<iframe","<form","background:url","onclick","document."];e<suspiciousStrings.length;e++)if(-1!==s.indexOf(suspiciousStrings[e])){t=!0;break}return t}};var l={settingsTab:"#dgwt_wcas_troubleshooting-tab",noIssuesClass:".js-dgwt-wcas-troubleshooting-no-issues",counterClass:".js-dgwt-wcas-troubleshooting-count",issuesListClass:".js-dgwt-wcas-troubleshooting-issues",progressBar:".dgwt-wcas-troubleshooting-wrapper .progress_bar",progressBarInner:".dgwt-wcas-troubleshooting-wrapper .progress-bar-inner",fixOutofstockButtonName:"dgwt-wcas-fix-out-of-stock-relationships",maintenanceAnalyticsButtonName:"dgwt-wcas-maintenance-analytics",switchAlternativeEndpoint:"dgwt-wcas-switch-alternative-endpoint",asyncActionButtonNameBegining:"dgwt-wcas-async-action-",init:function(){var e=this;if(void 0===dgwt_wcas.troubleshooting)return;let t=dgwt_wcas.troubleshooting.tests.issues.critical+dgwt_wcas.troubleshooting.tests.issues.recommended;t>0&&(s(e.counterClass).text(t).addClass("active"),s(e.settingsTab).addClass("enabled")),dgwt_wcas.troubleshooting.tests.results_async.length>0&&s.each(dgwt_wcas.troubleshooting.tests.results_async,function(){e.appendIssue(this,!1)}),dgwt_wcas.troubleshooting.tests.direct.length>0&&s.each(dgwt_wcas.troubleshooting.tests.direct,function(){e.appendIssue(this,!1)}),dgwt_wcas.troubleshooting.tests.async.length>0&&e.maybeRunNextAsyncTest(),s(document).on("click",'input[name="'+e.fixOutofstockButtonName+'"]',function(t){s('input[name="'+e.fixOutofstockButtonName+'"]').attr("disabled","disabled").next().addClass("loading");var a={action:"dgwt_wcas_troubleshooting_fix_outofstock",_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_fix_outofstock};return s.post(ajaxurl,a,function(){location.reload()}),!1}),s(document).on("click",'input[name="'+e.maintenanceAnalyticsButtonName+'"]',function(t){s('input[name="'+e.maintenanceAnalyticsButtonName+'"]').attr("disabled","disabled").next().addClass("loading");var a={action:"dgwt_wcas_troubleshooting_maintenance_analytics",_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_maintenance_analytics};return s.post(ajaxurl,a,function(){location.reload()}),!1}),s(document).on("click",'input[name="'+e.switchAlternativeEndpoint+'"]',function(t){var a=1===parseInt(s(this).data("switch"))?"enable":"disable";s('input[name="'+e.switchAlternativeEndpoint+'"]').attr("disabled","disabled").next().addClass("loading");var i={action:"dgwt_wcas_troubleshooting_switch_alternative_endpoint",_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_switch_alternative_endpoint,switch:a};return s.post(ajaxurl,i,function(){location.reload()}),!1}),s(document).on("click",'input[name^="'+e.asyncActionButtonNameBegining+'"]',function(e){var t=s(this);t.attr("disabled","disabled").next(".dgwt-wcas-ajax-loader").addClass("loading");var a={action:"dgwt_wcas_troubleshooting_async_action",internal_action:t.data("internal-action"),meta:t.data("meta"),_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_async_action};return s.post(ajaxurl,a,function(s){var e="boolean"==typeof s.success&&s.success,a=0;"string"==typeof s.data.message&&s.data.message.length>0&&(t.next().next(".dgwt-wcas-async-action-message").text(s.data.message).removeClass("success").removeClass("error").addClass(e?"success":"error"),a=500);var i=window.location.href;i.lastIndexOf("#")>0&&(i=i.substring(0,i.lastIndexOf("#"))),"object"==typeof s.data.args&&(i=wp.url.addQueryArgs(i,s.data.args)),setTimeout(function(){window.location=i},a)}),!1}),s(document).on("change","#dgwt-wcas-send-reports-in-feature",function(){s("#dgwt-wcas-async-action-send-indexer-failure-report").data("meta",JSON.stringify({auto_send:s(this).is(":checked")}))})},appendIssue:function(e,t){var a,i=wp.template("dgwt-wcas-troubleshooting-issue"),o=s(this.issuesListClass+"-"+e.status);"good"!==e.status&&(s(this.noIssuesClass).hide(),t&&dgwt_wcas.troubleshooting.tests.issues[e.status]++,(a=dgwt_wcas.troubleshooting.tests.issues.critical+dgwt_wcas.troubleshooting.tests.issues.recommended)>0&&(s(this.counterClass).text(a).addClass("active"),s(this.settingsTab).addClass("enabled")),s(o).append(i(e)))},maybeRunNextAsyncTest:function(){var e=this;dgwt_wcas.troubleshooting.tests.async.length>0&&s.each(dgwt_wcas.troubleshooting.tests.async,function(){var t={action:"dgwt_wcas_troubleshooting_test",test:this.test,_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_async_test};return!!this.completed||(this.completed=!0,s(e.progressBar).show(),s.post(ajaxurl,t,function(s){s.success&&e.appendIssue(s.data,!0),e.maybeRunNextAsyncTest()}),!1)}),e.recalculateProgression()},recalculateProgression:function(){var e=this,t=dgwt_wcas.troubleshooting.tests.async.length,a=0;s.each(dgwt_wcas.troubleshooting.tests.async,function(){this.completed&&a++});var i=Math.ceil(a/t*100);s(e.progressBarInner).css("width",i+"%"),100===i&&setTimeout(function(){s(e.progressBar).slideUp()},2e3)}},g={moveOptionClass:".js-dgwt-wcas-move-option",init:function(){var e=s(this.moveOptionClass);e.length>0&&s.each(e,function(e,t){var a=s("#"+s(t).data("move-dest").replace(/(:|\.|\[|\])/g,"\\$1"));a.length>0&&(s(t).closest("tr").hasClass("dgwt-wcas-premium-only")&&s(t).addClass("dgwt-wcas-premium-only"),s(t).clone().appendTo(a.closest("td fieldset"))),s(t).closest("tr").remove()})}},h={init:function(){"undefined"!=typeof Vue&&(Vue.component("dgwt-wcas-rule",{template:"#dgwt-wcas-settings-filters-rules-rule",components:{Selectize},props:["securitynonce","rule","rules","index"],data:()=>({isSelectActive:!0}),computed:{ruleValue(s){return this.rule.group}},watch:{rule:{handler:function(){this.$emit("update:rule",this.index)},deep:!0},ruleValue(){var s=this;this.$emit("change:group",this.index),this.isSelectActive=!1,setTimeout(function(){s.isSelectActive=!0},0)}},methods:{deleteRule(){this.$emit("delete:rule",this.index)},getSelectizeSettings(e){var t=void 0===dgwt_wcas_filters_rules_selected_options[e]?[]:dgwt_wcas_filters_rules_selected_options[e];return function({nonce:e,options:t,type:a}){return{persist:!1,maxItems:null,valueField:"key",labelField:"label",searchField:["label"],options:t,preload:!0,create:function(s){return{value:s.key,label:s.label}},load:function(t,i){s.ajax({url:ajaxurl,method:"POST",data:{action:"dgwt_wcas_settings_search_terms",query:t,type:a,_wpnonce:e},error:function(){i()},success:function(s){i(s.data)}})}}}({nonce:this.securitynonce,type:e,options:t})}}}),new Vue({el:"#dgwt-wcas-settings-filters-rules",components:{Selectize},data:()=>({rules:[]}),mounted(){try{let e=JSON.parse(this.$refs["dgwt-wcas-settings-filters-rules-ref"].value);s.each(e,function(s,t){e[s].key=Math.random()}),this.rules=e}catch(t){}this.updateInput()},methods:{addRule(){this.rules.push({group:"",values:[],key:Math.random()}),this.updateInput()},changeGroup(s){this.rules[s].values=[],this.updateInput()},deleteRule(s){this.rules=this.rules.filter(function(e,t){return t!==s}),this.updateInput()},updateInput(){let s=JSON.parse(JSON.stringify(this.rules));this.$refs["dgwt-wcas-settings-filters-rules-ref"].value=JSON.stringify(s.map(function(s){return s.key,delete s.key,s}))}}}))}};s(document).ready(function(){var w,u;(w=s(".js-dgwt-wcas-settings-margin-nob")).length>0&&w.each(function(){var e=s(this).find("td .dgwt-wcas-fieldset");if(e.length>0){var t=s(this).prev(".js-dgwt-wcas-settings-margin");if(t.length>0){var a=s(this).attr("class").split(/\s+/),i="";s.each(a,function(s,e){-1!==e.indexOf("js-dgwt-wcas-cbtgroup-")&&(i=e)});var o=e.clone(!0,!0);o.addClass("dgwt-wcas-settings-margin-nob"),i&&o.addClass(i),o.appendTo(t.find("td")),s(this).remove()}}}),e.init(),t.init(),i.init(),(u=s(".js-dgwt-wcas-sgs-autocolspan")).length>0&&u.find("td").attr("colspan",2),o.init(),n.init(),c.init(),r.init(),l.init(),g.init(),a.init(),d.init(),h.init(),window.DGWT_WCAS_SEARCH_PREVIEW.init()})}(jQuery);
